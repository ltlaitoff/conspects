---
title: Authorization
created: 2024-05-14 11:25
last modified: Tuesday 14th May 2024 11:25:52
aliases: 
tags:
  - winwintravel
---
# Authorization

Ця документація описує як у нас працює авторизація в взаємодії з backend

## Реєстрація

Спочатку нам потрібно зареєструвати користувача через відправку запита з поштою(яку користувач вводить в поле Login модалки) та паролем(зараз це захардкожена строка)

Якщо користувач не зареєстрованний - backend повинен повернути нам 201 статус та данні нового користувача

Якщо користувач вже зареєстрованний - backend повинен нам повернути 200 статус та данні користувача, а також повинен вказати десь, що цей користувач вже зареєстрованний

## Авторизація

Після реєстрація нам потрібно авторизуватись - для цього ми робимо запит с тими самими поштою та паролем

Якщо авторизація пройшла успішно - нам повертається 200 код та данні користувача з токеном, по якому ми будемо робити запити. А також повертається дата expire токену

Якщо авторизація не працює правильно - нам повертається 403 код помилки та вказується в чому саме помилка

## Автоматична переавторизація

Коли токен закінчує свій термін дії АБО ж backend робить передеплой то при кожному запиті backend повертає нам 401 код помилки

Коли наша система бачить 401 код помилки ми робимо спочатку запит на реєстрації, а потім на авторизацію

Чому так? Чому ми не можемо просто зробити запит на авторизацію?

Бо при редеплої backend повністью сбрасуються бази данних та всі користувачі пропадають
