---
title: Як працює fe+be
created: 2024-05-09 13:20
last modified: Thursday 9th May 2024 13:20:35
aliases: 
tags:
  - winwintravel
---
# Як працює fe+be та як це тестувати

Ця документація описує як працює взаємодія frontend та backend в різних середовищах, так як це в біса тестувати

## Frontend

На `frontend` у нас є 4 основі середовища(можна думати про це, як про гілки в git):
- `release` - Це задеплоїна версія, тобто наш `production`, яка використовує `production` версію `backend`
- `staging` - Перед релізна версія, може використовувати `staging` або `production` версії `backend`
- `dev` - Версія розробки, може використовувати `dev`, `staging` або `production` версії `backend`
- `feature/bug/other` - Pull requests

### Як тестувати потрібну версію `backend`

Щоб протестувати потрібну версію `backend` потрібно зробити наступні кроки:
1. Перейдіть на потрібну гілку в `git`
2. Змініть `environment variables` щоб працювати з потрібною версією backend(локальною, або віддаленою)
3. Запустіть `backend` локально(якщо потрібно)
4. Запустіть `frontend` одним із двох варіантів:
	1. Локально в режимі `development`. Виконайте команду `npm run dev`
	2. Локально в режимі `production`. Видаліть `dist` директорію, виконайте команду `npm run build`, а потім `npm run preview`

### Release

Реліз версія `frontend` - це максимально стабільна версія, яка повинна працювати з максимально стабільною версіює `backend`, тобто з `release`

І `frontend`, і `backend` весії `release` залеплоїні на одному домені

#### Як це тестувати?

Заходити на deploy та тестувати через нього

#### Чи можна, якщо потрібно, використати іншу версію `backend`?

Так, але локально. Зайдіть на гілку `release`, а далі по гайдику

### Staging

`Staging` представляє собою нову версію `frontend`. Нова версія `frontend` може як і залежати від нової версії `backend`(наприклад, у нас з'являється якийсь новий функціонал), так і бути не залежною(ми щось зробити на `frontend` не залежно від `backend`)

І `frontend`, і `backend` весії `staging` поки-що нікуди не задеплоїні

#### Як це тестувати?

Тут є два варіанти:
1. Якщо не потрібно змінювати версію `backend`, то потрібно запускати `docker image` який надають розробники. Цей варіант більш приорітетний, бо саме цей `image` потім буде в `release`, якщо все добре
2. Якщо потрібно змінювати версію `backend`. Тут потрібно локально зайти на гілку, а далі по гайдику

### Dev

`Dev` - версія, яка зараз в розробці, яка може не працювати, або працювати трохи криво

Ця версія має в собі останні зміни, які взагалі можуть бути

Також можна тут використовувати будь яку версію `backend`

#### Як це тестувати?

Тільки заходити на гілку та запускати

### feature/bug/other

`feature/bug/other` - Це наші pull requests

В залежності від того, на яку саме гілку вони йдуть їх потрібно по різному тестувати

Якщо PR йде в `dev` - тестувати від `backend` який використовується на `dev`

Якщо PR йде в `staging` - тестувати від `backend`  який використовується на `staging`

Якщо PR йде в `release` - тестувати як `staging`

## Backend

// TODO

Версії:
- `release`
- `staging`
- `dev`
