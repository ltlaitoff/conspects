---
title: CORS
created: 2023-12-26 12:25
Aliases:
Tags:
 - http
 - CORS
---
# CORS

<mark class="hltr-pink">C</mark>ross - Комунікація
	Ваш домен `a.com`  <==  Чужий домен `b.com`
	**Напрямок стрілки <mark class="hltr-red">дуже</mark> важливий!**
	Ресурс, який володіє вживає заходів щоб надати доступ ресурсу, який запитує
	Тобто, запит робить `a.com`, а надає `b.com`
	Тобто, якщо у вас помилка CORS і ви не контролюєте ресурс b.com - ви нічого вдіяти не можете

<mark class="hltr-green">O</mark>rigin = протокол + домен + порт
	https://google.com відрізняється від http://google.com
	a.com відрізняється від b.com
	localhost:3000 відрізняється від localhost:8080
<mark class="hltr-yellow">R</mark>esourse - 
	- Зображення
	- API
	- Шрифт
	- WebGL-текстура
<mark class="hltr-cyan">S</mark>haring

preflight або ж OPTIONS

Якщо ми будемо дозволяти робити запити до будь-якого серверу, а потім дивитись на заголовки може бути така ситуація:
Припустимо у нас є сервер, якому 10+- років та який не знає що таке CORS та як з ними працювати. І ми відправляємо на нього запит `POST USER 32 DELETE`. Сервер його виконає, але при поверненні результату, оскільки заголовків немає, виникне помилка. Обернена сумістність

Браузер запитує методом OPTIONS чи можна запитувати данні, де в запиті вказує, що хоче зробити метод, передати заголовок і сервер відповідає які запити можна робити, та які headers можна надіслати
Access-Control-Allow-Headers
Access-Control-Allow-Methods

І це убезпечує наш сервер

// Зробити опис коли OPTIONS робиться і що це пов'язано з формочками


Коли ти дивишся на якусь хрінь і не розумієшь якого біса вона така в 80% випадках - так історично склалося

Заголовки:
<mark class="hltr-red">Access-Control-Allow-Origin</mark> - НАЙГОЛОВНІШИЙ заголовок, який повинен передавати наш сервер

Access-Control-Expose-Headers
Цей заголовок повинен передавати сервер щоб клієнт мав доступ до якогось нестандартного заголовку

Access-Control-Max-Age - для кешування на кількість секунд


Access-Control-Request-Headers
Access-Control-Request-Methods

Тут заголовки та методи які клієнт надсилає
Це браузер робить за нас. Ми ніяк не можемо відманіпулювати цими заголовками
